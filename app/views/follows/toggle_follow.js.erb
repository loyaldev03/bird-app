var button = $('<%= ".follow-#{object['followable_type']}-#{object['followable_id']}" %>');

<% if action_name == 'create' && object['active'] == true %>
  button.replaceWith(`
      <%= escape_javascript(
        render(partial: 'follows/unfollow', 
          locals: { object: object.followable, text: text, classes: classes } )
      ) %>
    `);

  $('.notice').text('You are now following this feed').show();

    setTimeout(function(){
    $('.notice').fadeOut('slow');
  },3000);
    
<% elsif action_name == 'create' && object['active'] == false %>
  button.replaceWith(`<%= button_tag "request sent", class: "#{classes} follow-form", disabled: true %>`);
<% else %>
  button.replaceWith(`
      <%= escape_javascript(
        render(partial: 'follows/follow', 
          locals: { object: object.followable, text: text, classes: classes } )
      ) %>
    `);
  $('.notice').text('You are now not following this feed').show();

  setTimeout(function(){
    $('.notice').fadeOut('slow');
  },3000);

<% end %>
