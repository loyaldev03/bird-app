<div class="user-music-present">
  <% if current_user && current_user.id == @user.id %>
    <%= form_for(@user, remote: true,
        html: { id: 'change-avatar', class: 'userpage-avatar', method: :put } ) do |f| %>
      <%= image_tag @user.avatar.big_thumb %>
      <%= f.file_field :avatar, class: 'form-control-file' %>
      <%= f.hidden_field :avatar_cache %>
    <% end %>
  <% else %>
    <%= image_tag(@user.avatar.big_thumb.url, class: "userpage-avatar") %>
  <% end %>

  <%= image_tag 'icons/point-green-big.svg', class: "artist-online" if @user.online? %>

  <div class="user-bgrd" >
    <% if @user.artist_info && @user.artist_info.image.present? %>
      <%= image_tag(@user.artist_info.image) %>
    <% else %>
      <%= image_tag('crowd.jpg') %>
    <% end %>
  </div>

  <div class="user-info">
    <%= render 'follows/follow_button', object: @user %>

    <div class="artist-name">
      <h1><%= @user.name.upcase %></h1>
      <span>
        <% if @user.artist_info %>
          <%= "#{@user.artist_info.genre} / " if @user.artist_info.genre.present? %>
          <b><%= "#{@user.artist_info.followers_count} #{'Follower'.pluralize(@user.artist_info.followers_count)}" %></b>
        <% end %>
      </span>
    </div>

    <div class="user-since">
      <%= image_tag 'icons/egg-white.svg' %>
      DIRTYBIRD ARTIST<br>
      <span>Since <%= @user.created_at.strftime("%Y") %></span>
    </div>
    
    <% if @user.artist_info %>
      <div class="artist-stat">
        <% if @user.releases.count > 0 %>
          <div>
            Releases<br>
            <span><%= @user.releases.count %></span>
          </div>
        <% end %>

        <% if @user.artist_info.tracks_count.to_i > 0 %>
          <div>
            Tracks<br>
            <span><%= @user.artist_info.tracks_count %></span>
          </div>
        <% end %>
      </div>
    <% end %>
  </div>
</div>

<div class="user-controls">
  <div class="c-btn-group d-inline-block mr-4">
    <% artist = current_page?(artist_path(@user)) %>
    <% classes = ["btn btn-wide c-btn-blue", "btn btn-wide c-btn-black btn-disabled"] %>
    <%= link_to "Feed", @user, 
        class: artist ? classes[1] : classes[0] %><!--
   --><%= link_to "Music", playlists_path(user_id: @user), 
        class: artist ? classes[0] : classes[1] %>
  </div>

  <% if @user.artist_info.present? %>
    <div class="artist-social">
      CONNECT
      <%= link_to image_tag('icons/social-insta-b.svg'), 
            @user.artist_info.instagram if @user.artist_info.instagram.present? %>
      <%= link_to image_tag('icons/social-fb-b.svg'), 
            @user.artist_info.facebook if @user.artist_info.facebook.present? %>
      <%= link_to image_tag('icons/social-twitter-b.svg'), 
            @user.artist_info.twitter if @user.artist_info.twitter.present? %>
    </div>
  <% end %>

  <div class="c-btn-group d-inline-block float-right">
    <% artist_releases_class = current_page?(artist_releases_path(@user)) ? 'c-btn-red' : 'c-btn-white2' %>
    <% artist_tracks_class = current_page?(artist_tracks_path(@user)) ? 'c-btn-red' : 'c-btn-white2' %>
    <% artist_plylists_class = current_page?(playlists_path(user_id: @user)) ? 'c-btn-red' : 'c-btn-white2' %>
    <%= link_to "RELEASES", artist_releases_path(@user), 
        class: "btn btn-wide #{artist_releases_class}" %><!--
    --><%= link_to "TRACKS", artist_tracks_path(@user), 
        class: "btn btn-wide #{artist_tracks_class}" %><!--
    --><%= link_to "Playlists", playlists_path(user_id: @user), 
        class: "btn btn-wide #{artist_plylists_class}",
        id: "playlist-user" %>
  </div>
</div>

<% if current_user && current_user.id == @user.id %>
  <% content_for :body_area do %>
    <div class="modal modal-blured" id="cropModal" tabindex="-1" role="dialog" aria-hidden="true">

    </div>
  <% end %>
<% end %>